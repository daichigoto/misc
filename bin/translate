#!/bin/sh

#=========================================================================
# 翻訳サービスを使ったテキストの翻訳コマンド
#=========================================================================

#=========================================================================
# コマンドセットをセットアップ
#=========================================================================
if	[ ! -e /usr/bin/pip ]
then
	pacman -S --noconfirm python-pip
fi

if	[ ! -e /usr/bin/deepl ]
then
	pip install deepl-translate
fi

#=========================================================================
# 指定されたファイルまたはパイプラインから受けとるテキストデータを翻訳
# サービスを使って翻訳
#=========================================================================
# 翻訳対象のデータを一時ファイルに保存
tmp=/tmp/$$
if	[ 0 = $# ]
then
	cat	> $tmp-src
else
	cat	$1 > $tmp-src
fi

# 翻訳サービスで翻訳
deepl	English Japanese --file $tmp-src

# 一時ファイルを削除
rm	-f $tmp-*
