#!/bin/sh

case "$(uname)" in
# FreeBSD
FreeBSD)
	# BSDmake
	exec /usr/bin/make "${@}"
	;;
# Mac
Darwin)
	setup_mac

	if [ -z "$(which bsdmake)" ]
	then
		brew install bsdmake
	fi

	case "$(pwd)" in
	${HOME}/Documents/*)
		# BSDmake
		exec $(which bsdmake | head -1) "${@}"
		;;
	*)
		# GNUmake
		exec /usr/bin/make "${@}"
		;;
	esac
	;;
*)
	if [ -z "$(which -a make | grep -v ${0} | head -1)" ]
	then
		echo "misc/bin/make: no such command: make" 1>&2
		exit 1
	else
		exec $(which make | grep -v ${0} | head -1) "${@}"
	fi
	;;
esac
